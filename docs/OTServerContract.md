# Document type `<notaryProviderContract>`

This class derives from [OTContract](OTContract.md) and provides methods for
creating an loading authenticated server references.

# Purpose

The contract allows for secure communication with a remote server. The server
data (hostname and port) is signed by the contract's _signer_ Nym and the
corresponding credentials.

These credentials can be used to

* Encrypt outgoing messages to the server using `OTEnvelope::Seal` and
  `OTEnvelope::Encrypt()`
* Verify incoming messages by checking the server signature using
  `OTContract::VerifySignature()`

TODO: details figure out *where* this actually happens

# Structure

The XML of this contract extends the superclass using the classical method:

* Override `CreateContents()` to write custom XML elements
* Override `ProcessXMLNode()` to read custom XML elements

A template of the XML generated by this class looks like this (whitespace added
for readability):
```xml
<?xml version="1.0"?>
<notaryProviderContract version="2.0">
    <entity shortname="$shortname"
            longname="$longname"
            email="$email"
            serverURL="$serverURL">

    <notaryServer hostname="$hostname"
                  port="$port"
                  URL="$URL" />

    <!-- CreateInnerContents() -->
</notaryProviderContract>
```
## Elements and attributes
* Element `entity`: The legal entity this contract is about.
  * Attribute `shortname`: An arbitrary name chosen upon creation of the entity.
  * Attribute `longname`: A, presumably longer, arbitrary name chosen upon creation of the entity.
  * Attribute `email`: The email address of the entity.
  * Attribute `serverURL`: The URL of the server with which the entity is registered.
* Element `notaryServer`: The technical details about the notary the entity is registered.
  * Attribute `hostname`: The hostname of the server.
  * Attribute `port`: The port the server is listening on.
  * Attribute `URL`: The URL of the server, which includes the hostname and is the same as the `serverURL`.

# Notes
Perhaps the `entity` element is reused somewhere. If it is not it might be
interesting to merge `entity` and `notaryServer` into one element. Both
elements now describe the same thing. This would also take care of the
duplicate `serverURL` and `URL` attributes.

Also the attributes `hostname` and `port` seems quite redundant since both can
(and should) be encoded in the `URL` attribute. Perhaps this was done for the
benefit of the client. If that is the case one should consider adding the
attribute `protocol`. These three attributes combine into an URL.
